import{_ as p,c as i,a as e,b as a,d as n,e as l,w as c,r as o,o as r}from"./app-Dqa0694n.js";const u={};function d(k,s){const t=o("RouteLink");return r(),i("div",null,[s[13]||(s[13]=e('<h1 id="liens-de-succession" tabindex="-1"><a class="header-anchor" href="#liens-de-succession"><span>Liens de succession</span></a></h1><p>La recherche multicritères de liens de succession se fait avec la methode <code>LuFiipe\\InseeSierene\\Sirene::searchEstablishmentsSuccessions()</code>.</p><p>Puis en passant une instance de <code>LuFiipe\\InseeSierene\\Parameters\\SuccessionLinksParameters</code> qui permet:</p><ul><li>D&#39;effectuer des requêtes avec la méthode <code>setQuery()</code>.</li><li>Trier les résulats avec <code>addSort()</code>.</li><li>De limiter les résultats avec <code>setPerPage()</code> ou de débuter la pagination depuis un index avec <code>setOffset()</code>.</li><li>Utiliser la pagination profonde avec <code>withCursor()</code>.</li></ul>',4)),a("p",null,[s[1]||(s[1]=n("Les recherches multicritères de liens de succession retournent une instance de ")),l(t,{to:"/responses.html#collection"},{default:c(()=>s[0]||(s[0]=[n("LuFiipe\\InseeSierene\\Response\\Collection")])),_:1,__:[0]}),s[2]||(s[2]=n(" avec laquelle on peut parcourir les résultats par itération avec ")),s[3]||(s[3]=a("code",null,"each()",-1)),s[4]||(s[4]=n(" ou manuellement avec des méthodes comme ")),s[5]||(s[5]=a("code",null,"firstPage()",-1)),s[6]||(s[6]=n(", ")),s[7]||(s[7]=a("code",null,"nextPage()",-1)),s[8]||(s[8]=n(", ")),s[9]||(s[9]=a("code",null,"previousPage()",-1)),s[10]||(s[10]=n(" et ")),s[11]||(s[11]=a("code",null,"lastPage()",-1)),s[12]||(s[12]=n("."))]),s[14]||(s[14]=e(`<h2 id="requete" tabindex="-1"><a class="header-anchor" href="#requete"><span>Requête</span></a></h2><p>Les requêtes multicritères se font avec la méthode <code>setQuery()</code>.</p><p>Exemple de recherche avec l&#39;établissement successeur du siret 31300257800042 :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;siretEtablissementPredecesseur:31300257800042&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span><span class="token operator">-&gt;</span><span class="token function">searchEstablishmentsSuccessions</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="elimination" tabindex="-1"><a class="header-anchor" href="#elimination"><span>Elimination</span></a></h3><p>Il est possible de construire une requête en recherchant tous les établissements qui n&#39;ont pas une caractéristique en utilisant le caractère &quot; - &quot;.</p><p>Exemple avec la recherche de tous les liens de succession sans transferts de siège :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;-continuiteEconomique:true&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span><span class="token operator">-&gt;</span><span class="token function">searchEstablishmentsSuccessions</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="operateurs-and-or" tabindex="-1"><a class="header-anchor" href="#operateurs-and-or"><span>Opérateurs AND, OR</span></a></h3><p>Les mots clés AND et OR sont autorisés et peuvent être combinés avec des parenthèses ; sans parenthèses le AND prévaut sur le OR.</p><p>Exemple avec la recherche de tous les liens de succession avec l&#39;établissement 53331016500022 comme successeur, pour lesquels il y a continuité économique :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;siretEtablissementSuccesseur:53331016500022 AND continuiteEconomique:true&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span><span class="token operator">-&gt;</span><span class="token function">searchEstablishmentsSuccessions</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="requete-sur-les-variables-de-type-date" tabindex="-1"><a class="header-anchor" href="#requete-sur-les-variables-de-type-date"><span>Requête sur les variables de type date</span></a></h3><p>Les variables dates requêtables sont <em>dateLienSuccession</em> et <em>dateDernierTraitementLienSuccession</em>.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;dateLienSuccession:2019-02-02&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span><span class="token operator">-&gt;</span><span class="token function">searchEstablishmentsSuccessions</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Pour plus d&#39;info voir : Documentation API Sirene</p><p><a href="https://www.sirene.fr/static-resources/documentation/multi_ls_q_311.html" target="_blank" rel="noopener noreferrer">Recherche sur les liens de succession</a></p></div><h2 id="tri" tabindex="-1"><a class="header-anchor" href="#tri"><span>Tri</span></a></h2><p>Par défaut, les résultats sont triés par <em>siretEtablissementPredecesseur</em>. La seule autre possibilité est le tri par <em>siretEtablissementSuccesseur</em>.</p><ul><li><code>SortInterface::SORT_SIRET_ETABLISSEMENT_PREDECESSEUR</code> : trie par <em>siretEtablissementPredecesseur</em>.</li><li><code>SortInterface::SORT_SIRET_ETABLISSEMENT_SUCCESSEUR</code> : trie par <em>siretEtablissementSuccesseur</em>.</li></ul><p>Exemple de tri <em>siretEtablissementSuccesseur</em> :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>SortInterface</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;transfertSiege:true&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">addSort</span><span class="token punctuation">(</span><span class="token class-name static-context">SortInterface</span><span class="token operator">::</span><span class="token constant">SORT_SIRET_ETABLISSEMENT_SUCCESSEUR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span><span class="token operator">-&gt;</span><span class="token function">searchEstablishmentsSuccessions</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="paginations" tabindex="-1"><a class="header-anchor" href="#paginations"><span>Paginations</span></a></h2><p>Tous les résultats des recherches multicritères sont renvoyés par page. La pagination peut se faire de manière classique avec une <code>limit</code> et un <code>offset</code>. Ou en utilisant un système de <code>curseur</code>.</p><h3 id="limit-offset" tabindex="-1"><a class="header-anchor" href="#limit-offset"><span>Limit, Offset</span></a></h3><ul><li><code>setPerPage()</code> Permet d&#39;indiquer le nombre d&#39;éléments à retourner par page.</li><li><code>setOffset()</code> Permet d&#39;indiquer le rang de classement du premier élément à retourner sur la page.</li></ul><p>Exemple en limitant la pagination à 8 éléments par page et en débutant la pagination à l&#39;index N° 4 :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;continuiteEconomique:true&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setPerPage</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="curseur" tabindex="-1"><a class="header-anchor" href="#curseur"><span>Curseur</span></a></h3><p>Si vous désirez parcourir un grand nombre de résultats, notamment pour obtenir des résultats au-delà de la limite indiquée dans le tableau (1000), il est fortement recommandé d&#39;utiliser des curseurs.</p><p>Exemple de recherche avec tous les liens de succession enregistrés entre le 20 et le 22 décembre 2020 :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Parameters<span class="token punctuation">\\</span>SuccessionLinksParameters</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">LuFiipe<span class="token punctuation">\\</span>InseeSierene<span class="token punctuation">\\</span>Sirene</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sirene</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sirene</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;YOUR-API-KEY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SuccessionLinksParameters</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;dateLienSuccession:[2020-12-20 TO 2020-12-22]&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">setPerPage</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">withCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Pour plus d&#39;info voir : Documentation API Sirene</p><p><a href="https://www.sirene.fr/static-resources/documentation/multi_ls_resultat_311.html" target="_blank" rel="noopener noreferrer">Liens de succession : résultat et pagination</a></p></div>`,32))])}const v=p(u,[["render",d]]),b=JSON.parse('{"path":"/succession-links.html","title":"Liens de succession","lang":"fr","frontmatter":{},"headers":[{"level":2,"title":"Requête","slug":"requete","link":"#requete","children":[{"level":3,"title":"Elimination","slug":"elimination","link":"#elimination","children":[]},{"level":3,"title":"Opérateurs AND, OR","slug":"operateurs-and-or","link":"#operateurs-and-or","children":[]},{"level":3,"title":"Requête sur les variables de type date","slug":"requete-sur-les-variables-de-type-date","link":"#requete-sur-les-variables-de-type-date","children":[]}]},{"level":2,"title":"Tri","slug":"tri","link":"#tri","children":[]},{"level":2,"title":"Paginations","slug":"paginations","link":"#paginations","children":[{"level":3,"title":"Limit, Offset","slug":"limit-offset","link":"#limit-offset","children":[]},{"level":3,"title":"Curseur","slug":"curseur","link":"#curseur","children":[]}]}],"git":{"updatedTime":1750409905000,"contributors":[{"name":"Luis-Filipe ANTUNES","username":"","email":"lf.antunes.dasilva@gmail.com","commits":1}],"changelog":[{"hash":"34ae70bb58865cf686cb6461a22bc23d95033548","time":1750409905000,"email":"lf.antunes.dasilva@gmail.com","author":"Luis-Filipe ANTUNES","message":"Initial commit"}]},"filePathRelative":"succession-links.md"}');export{v as comp,b as data};
